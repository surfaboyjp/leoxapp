function roundUp(t){return Math.round(10*t)/10}window.onload=function(){labelMax=document.getElementById("labelrange").value,labelList=[];for(let t=0;t<=labelMax;t++)labelList.push(t);rate=document.getElementById("rate").value;var e=Number(document.getElementById("principal").value);totalAmount=[e];for(let t=0;t<labelMax;t++)totalAmount.push(e);gainList=[e];for(let t=0;t<labelMax;t++)risoku=gainList[t]*rate,gainList.push(gainList[t]+risoku);changeLineChart(),maturityAmount=gainList[gainList.length-1],document.getElementById("rate-value").innerHTML=roundUp(100*rate),document.getElementById("rate-value2").innerHTML=roundUp(100*rate),document.getElementById("label-value").innerHTML=labelMax,document.getElementById("label-value2").innerHTML=labelMax,document.getElementById("maturityAmount").innerHTML=Math.round(maturityAmount).toLocaleString(),document.getElementById("maturityAmountMag").innerHTML=Math.floor(maturityAmount/e)};let lineChart,labelMax=100,labelList=[],gainList=[],rate=1,risoku,totalAmount=[];const chart=document.getElementById("lineChart");function changeLabel(){labelMax=document.getElementById("labelrange").value,labelList=[];for(let t=0;t<=labelMax;t++)labelList.push(t);changeGainList()}function changeRate(){rate=document.getElementById("rate").value,changeGainList()}function changeGainList(){var e=Number(document.getElementById("principal").value);totalAmount=[e];for(let t=0;t<labelMax;t++)totalAmount.push(e);gainList=[e];for(let t=0;t<labelMax;t++)risoku=gainList[t]*rate,gainList.push(gainList[t]+risoku);maturityAmount=gainList[gainList.length-1],document.getElementById("maturityAmount").innerHTML=Math.round(maturityAmount).toLocaleString(),document.getElementById("maturityAmountMag").innerHTML=Math.floor(maturityAmount/e),changeLineChart()}function changeLineChart(){lineChart&&lineChart.destroy(),lineChart=new Chart(chart,{type:"line",data:{labels:labelList,datasets:[{label:"総利益 - Maturity Amount",data:gainList,borderColor:"#1AB394",backgroundColor:"rgba(214, 235, 226, 0.4)",pointborderColor:"#1AB394"},{label:"投資総額 - Total Investment",data:totalAmount,borderColor:"#7DB3E8",backgroundColor:"rgba(196, 223, 228, 0.4)",pointborderColor:"#7DB3E8"}]},options:{tooltips:{backgroundColor:"rgba(75, 192, 192, 1)",enabled:!1,mode:"index",intersect:!1,custom:function(t){var e,a,n,l=document.getElementById("fukuri-tooltip");l||((l=document.createElement("div")).id="fukuri-tooltip",l.innerHTML="<table></table>",this._chart.canvas.parentNode.appendChild(l)),0===t.opacity?l.style.opacity=0:(l.classList.remove("above","below","no-transform"),t.yAlign?l.classList.add(t.yAlign):l.classList.add("no-transform"),t.body&&(t.title,e=t.body.map(function(t){return t.lines}),a=t.dataPoints,console.log(a),console.log(e),n=(n=(n='<div class="tipTitle">')+(a[0].label+"年 - 運用結果")+'</div><div class="tipBody">')+'<div class="tipLine"><span>'+e[0][0].split(" ")[0]+" $"+Math.floor(a[0].yLabel).toLocaleString()+"</span></div>",l.innerHTML=n+="</div>"),this._chart.canvas.offsetTop,this._chart.canvas.offsetLeft,l.style.opacity=1,l.style.fontFamily=t._fontFamily,l.style.fontSize=t.fontSize,l.style.fontStyle=t._fontStyle,l.style.padding=t.yPadding+"px "+t.xPadding+"px")},xPadding:12,yPadding:10,callbacks:{title:function(t){return t[0].xLabel+" 年"},label:function(t,e){return e.datasets[t.datasetIndex].label+" | ＄"+Math.round(t.value)}}}}})}function changeRangeNum(){labelMax=document.getElementById("labelrange").value,document.getElementById("label-value").innerHTML=labelMax,document.getElementById("label-value2").innerHTML=labelMax,rate=document.getElementById("rate").value,document.getElementById("rate-value").innerHTML=roundUp(100*rate),document.getElementById("rate-value2").innerHTML=roundUp(100*rate)}